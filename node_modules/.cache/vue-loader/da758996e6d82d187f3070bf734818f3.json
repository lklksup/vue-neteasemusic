{"remainingRequest":"D:\\github-project\\vue-neteasemusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\github-project\\vue-neteasemusic\\src\\views\\Home\\Discover\\MainerLeft\\TopList\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\github-project\\vue-neteasemusic\\src\\views\\Home\\Discover\\MainerLeft\\TopList\\index.vue","mtime":1654515726000},{"path":"D:\\github-project\\vue-neteasemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github-project\\vue-neteasemusic\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\github-project\\vue-neteasemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github-project\\vue-neteasemusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6J3RvcGxpc3QnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvL+amnOWNleaVsOaNrgogICAgICAgICAgICBpbWdMaXN0OltdLAoKICAgICAgICAgICAgbmFtZTpbXSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgLy/ojrflj5bmppzljZXmlbDmja4KICAgICAgICBhc3luYyBnZXRUb3BMaXN0KCl7IAogICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kQVBJLnJlcVRvcExpc3QoKTsKICAgICAgICAgICAgaWYocmVzdWx0LmNvZGUgPT0gMjAwKXsKICAgICAgICAgICAgICAgIGxldCB4ID0gcmVzdWx0Lmxpc3Quc2xpY2UoMCwzKTsKICAgICAgICAgICAgICAgIHguZm9yRWFjaChhc3luYyAoaXRlbSk9PnsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0MiA9IGF3YWl0IHRoaXMuJEFQSS5yZXFQbGF5TGlzdChpdGVtLmlkLGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdDT09LSUUnKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coMSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0Mik7CiAgICAgICAgICAgICAgICAgICAgbGV0IHQ9e30KICAgICAgICAgICAgICAgICAgICB0LmlkID0gaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgICB0Lm5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgdC51cmwgPSByZXN1bHQyLnBsYXlsaXN0LmNvdmVySW1nVXJsOwogICAgICAgICAgICAgICAgICAgIHQuZGF0YSA9IHJlc3VsdDIucHJpdmlsZWdlcy5zbGljZSgwLDEwKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICIiOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aSA8IDEwO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHMgKz0gdC5kYXRhW2ldLmlkOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpICE9IDkpIHMgKz0gJywnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0MyA9IGF3YWl0IHRoaXMuJEFQSS5yZXFTb25nKHMsbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NPT0tJRScpKTsKICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aSA8IDEwO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgdC5kYXRhW2ldLm5hbWUgPSByZXN1bHQzLnNvbmdzW2ldLm5hbWU7CiAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdMaXN0LnB1c2godCk7ICAgCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvL+WIt+aWsOmhtemdogogICAgICAgIHJlZnJlc2goKXsKICAgICAgICAgICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7CiAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfSwKICAgICAgICAvL+WOu+amnOWNlQogICAgICAgIEdvVG9wTGlzdChpZCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6Jy9ob21lL3RvcGxpc3QnLAogICAgICAgICAgICAgICAgcXVlcnk6ewogICAgICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDmt7vliqDpn7PkuZDoh7Pmkq3mlL7liJfooagKICAgICAgICBhZGRNdXNpY0xpc3QoaWRzKXsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2FkZE11c2ljTGlzdCcsaWRzKTsKICAgICAgICB9LAogICAgICAgIC8vIOiuvue9ruW9k+WJjeaSreaUvueahOmfs+S5kAogICAgICAgIHNldE11c2ljKGlkKXsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldE11c2ljcycsaWQpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWRkTXVzaWNMaXN0JyxpZCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdwbGF5Jyk7ICAgIAogICAgICAgICAgICB9LCA1MDApOyAgICAgIAogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZCgpewogICAgICAgIHRoaXMuZ2V0VG9wTGlzdCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Home/Discover/MainerLeft/TopList","sourcesContent":["<template>\n  <div class=\"TopList\">\n      <div class=\"header\">\n        <a >榜单</a>\n        <span class=\"more\">\n          <router-link to=\"/home/toplist\">更多</router-link>\n          <i>&nbsp;</i>\n        </span>\n     </div>\n     <div class=\"body\">\n        <div class=\"top-flag\" v-for=\"(attr,index) in imgList\" :key=\"index\">\n            <!-- 顶部 -->\n            <div class=\"top\">\n                <div class=\"cover\"  @click=\"GoTopList(attr.id)\"></div>\n                <img v-lazy=\"attr.url\">\n                <div class=\"tit\">\n                    <a @click=\"GoTopList(attr.id)\"><strong>{{attr.name}}</strong></a>\n                    <div class=\"button\">\n                        <a class=\"play\"></a>\n                        <a class=\"subs\"></a>\n                    </div>\n                </div>\n            </div>\n            <ul>\n                <li v-for=\"(list,indexx) in attr.data\" :key=\"indexx\">\n                    <span :class=\"{red:indexx<3}\">{{indexx+1}}</span>\n                    <router-link :to=\"{path:'/song',query:{id:`${list.id}`}}\" :title=\"list.name\">{{list.name}}</router-link>\n                    <div class=\"open\">\n                        <a title=\"播放\" class=\"play\" @click=\"setMusic(list.id)\"></a>\n                        <a title=\"添加到播放列表\" class=\"add\" @click=\"addMusicList(list.id)\"></a>\n                        <a title=\"收藏\" class=\"subs\"></a>\n                    </div>\n                </li>\n            </ul>\n            <div class=\"more\">\n                <a @click=\"GoTopList(attr.id)\">查看全部></a>\n            </div>\n        </div>\n     </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    name:'toplist',\n    data() {\n        return {\n            //榜单数据\n            imgList:[],\n\n            name:[],\n        }\n    },\n    methods:{\n        //获取榜单数据\n        async getTopList(){ \n            let result = await this.$API.reqTopList();\n            if(result.code == 200){\n                let x = result.list.slice(0,3);\n                x.forEach(async (item)=>{\n                    let result2 = await this.$API.reqPlayList(item.id,localStorage.getItem('COOKIE'));\n                    console.log(1);\n                    console.log(result2);\n                    let t={}\n                    t.id = item.id;\n                    t.name = item.name;\n                    t.url = result2.playlist.coverImgUrl;\n                    t.data = result2.privileges.slice(0,10);\n                    let s = \"\";\n                    for(let i = 0;i < 10;i++){\n                        s += t.data[i].id;\n                        if(i != 9) s += ',';\n                    }\n                    let result3 = await this.$API.reqSong(s,localStorage.getItem('COOKIE'));\n                   for(let i = 0;i < 10;i++){\n                       t.data[i].name = result3.songs[i].name;\n                   }\n                    this.imgList.push(t);   \n                })\n            }\n        },\n        //刷新页面\n        refresh(){\n            let timer = setTimeout(() => {\n                this.$forceUpdate();\n                clearTimeout(timer);\n                \n                this.load = false;\n            }, 100);\n        },\n        //去榜单\n        GoTopList(id){\n            this.$router.push({\n                path:'/home/toplist',\n                query:{\n                    id\n                }\n            })\n        },\n        // 添加音乐至播放列表\n        addMusicList(ids){\n            this.$store.dispatch('addMusicList',ids);\n        },\n        // 设置当前播放的音乐\n        setMusic(id){\n            this.$store.dispatch('setMusics',id);\n            this.$store.dispatch('addMusicList',id);\n            setTimeout(() => {\n                this.$bus.$emit('play');    \n            }, 500);      \n        },\n    },\n    mounted(){\n        this.getTopList();\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n    .TopList{\n        width: 689px;\n        position: relative;\n        .header{\n            width: 100%;\n            height: 33px;\n            padding:0 10px 0 34px;\n            background: url('./images/index.png') no-repeat -225px -156px;\n            border-bottom: 2px solid #C10D0C;\n\n            a{\n                float: left;\n                font-size: 20px;\n                font-weight: normal;\n                line-height: 28px;\n                color: #333;\n                &:hover{\n                    cursor: pointer;\n                }\n            }\n\n            .more{\n                width: 40px;\n                height: 16px;\n                margin: 9px;\n                float: right;\n\n                a{\n                    font-size: 12px;\n                    color: #666;  \n                    line-height: 15px;\n\n                    &:hover{\n                        cursor: pointer;\n                        text-decoration: underline;\n                    }\n                }\n\n                i{\n                    float: right;\n                    display: block;\n                    background: url('./images/index.png') no-repeat 0 -240px;\n                    font-style: normal;\n                    text-align: left;\n                    font-size: inherit;\n                    width: 12px;\n                    height: 12px;\n                    margin-left: 4px;\n                    margin-top:1px;\n                }\n                \n            }\n        }\n        .body{\n            width: 690px;\n            height: 472px; \n            margin-top: 20px;\n\n            .top-flag{\n                width: 230px;\n                height: 472px;\n                border: 1px solid #ddd;\n                float: left;\n\n                .top{\n                    height: 120px;\n                    padding: 20px 0 0 19px;  \n                    position: relative;\n                    .cover{\n                        width: 80px;\n                        height: 80px;\n                        background: url(\"./images/coverall.png\") no-repeat -145px -57px;\n                        position: absolute;\n                        z-index: 2;\n                        top:20;\n                        left: 19;\n\n                        &:hover{\n                            cursor: pointer;\n                        }\n                    }\n                    img{\n                        width: 80px;\n                        height: 80px;\n                        float: left;\n                    }\n                    .tit{\n                        width: 116px;\n                        height: 51px;\n                        margin: 6px 0 0 10px;\n                        float: left;\n\n                        >a:hover{\n                            cursor: pointer;\n                            text-decoration: underline;\n                        }\n                        a{\n                            color: #333;\n                            font-size: 14px;\n                            display: inline-block;\n                        }\n\n                        .button{\n                            margin-top: 8px;\n                            height: 22px;\n\n                            a{\n                                height: 100%;\n                                width: 22px;\n                                margin-right: 10px;\n                                font-weight:bold;\n                                font-family: Arial, Helvetica, sans-serif;\n                                background: url('./images/index.png') no-repeat;\n                                float: left;\n                            }\n                            .subs{\n                                background-position: -300px -205px;\n                            }\n                            .subs:hover{\n                                background-position: -300px -235px;\n                                cursor: pointer;\n                            }\n                            .play{\n                                background-position: -267px -205px;\n                            }\n                            .play:hover{\n                                background-position: -267px -235px;\n                                cursor: pointer;\n                            }\n                        }\n                    }\n                }\n\n                ul{\n                    width: 230px;\n                    \n                    li{\n                        width: 100%;\n                        height: 32px;\n                        padding-left:25px;\n                        float: left;\n                        &:hover a{\n                             width: 88px;\n                        }\n                        &:hover .open{\n                            display: block;\n                        }\n                        span{\n                            float: left;\n                            width: 35px;\n                            height: 100%;\n                            text-align: center;\n                            line-height: 32px;\n                            font-size: 16px;\n                            color:#666666;\n                        }  \n\n                        a{\n                            float: left;\n                            width: 170px;\n                            height: 100%;\n                            float: left;\n                            line-height: 32px;\n                            color: #000;\n                            overflow: hidden;\n                            text-overflow: ellipsis;\n                            white-space: nowrap;\n\n                            &:hover{\n                                cursor: pointer;\n                                text-decoration: underline;\n                               \n                            }\n                        }\n\n                        .red{\n                            color: #c10d0c;\n                        }\n\n                        .open{\n                            display: none;\n                            float: right;\n                            width: 82px;\n                            height: 19px;\n                            margin-top: 7px;\n                            a{\n                                float: left;\n                                width: 17px;\n                                height: 17px;\n                                margin-right:10px;\n                                background: url('./images/index.png') no-repeat;\n                            }\n                            .play{\n                                background-position: -267px -268px;\n                            }\n                            .play:hover{\n                                background-position: -267px -288px;\n                                cursor: pointer;\n                            }\n                            .add{\n                                margin-top: 2px;\n                                margin-right: 6px;\n                                background: url('./images/icon.png') no-repeat;\n                                background-position: 0 -700px;\n                            }\n                            .add:hover{\n                                background-position: -22px -700px;\n                            }\n                            .subs{\n                                background-position: -297px -268px;\n                            }\n                            .subs:hover{\n                                background-position: -297px -288px;\n                                cursor: pointer;\n                            }\n                        }\n                    }\n\n                    li:nth-of-type(odd){\n                        background: rgb(232,232,232);\n                    }\n                    li:nth-of-type(even){\n                        background: rgb(244,244,244);\n                    }\n                }\n\n                .more{\n                    width: 230px;\n                    height: 32px;\n                    padding-right: 32px;\n                    text-align: right;\n                    line-height: 32px;\n                    background: #e8e8e8;\n                    color:#000;\n                    a{\n                        color:#000;\n                        font-size: 12px;\n                    };\n                    a:hover{\n                        cursor: pointer;\n                        text-decoration: underline;\n                        color: #000;\n                    }\n                }\n            }\n\n            .top-flag:nth-child(2){\n                border-left: none;\n                border-right: none;\n            }\n        }\n    }\n</style>"]}]}