{"remainingRequest":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test1\\vue-neteasemusic\\cloud-master\\src\\views\\Friend\\Logged\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\src\\views\\Friend\\Logged\\index.vue","mtime":1654515726000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6J2xvZ2dlZCcsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8vIOWKqOaAgeaVsOmHjwogICAgICAgICAgICBwYWdlU2l6ZToyMCwKICAgICAgICAgICAgbGFzdHRpbWU6LTEsCiAgICAgICAgICAgIC8v5Yqo5oCB5YaF5a65CiAgICAgICAgICAgIGV2ZW50TGlzdDpbXSwKICAgICAgICAgICAgLy8g55So5oi35L+h5oGvCiAgICAgICAgICAgIHVzZXJJbmZvOnt9LAogICAgICAgICAgICAvL+aYr+WQpuiDveWPkeivt+axggogICAgICAgICAgICBmbGFnOnRydWUsCiAgICAgICAgICAgIC8vIOmhtemdoumrmOW6pgogICAgICAgICAgICBoZWlnaHQ6MTAwMDAwMCwKICAgICAgICAgICAgLy8g5a6a5pe25ZmoCiAgICAgICAgICAgIHRpbWVyOltdLAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICAvL+iOt+WPluWlveWPi+WKqOaAgQogICAgICAgIGFzeW5jIGdldEV2ZW50KCl7CiAgICAgICAgICAgIGlmKHRoaXMuZmxhZyA9PSBmYWxzZSkgcmV0dXJuIDsKICAgICAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiRBUEkucmVxRXZlbnQodGhpcy5wYWdlU2l6ZSxsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQ09PS0lFJyksdGhpcy5sYXN0dGltZSk7CiAgICAgICAgICAgIGxldCB4ID0gcmVzdWx0LmV2ZW50OwogICAgICAgICAgICB0aGlzLmxhc3R0aW1lID0gcmVzdWx0Lmxhc3R0aW1lOwogICAgICAgICAgICB4LmZvckVhY2goKGl0ZW0pPT57CiAgICAgICAgICAgICAgICBpdGVtLmRhdGEgPSBKU09OLnBhcnNlKGl0ZW0uanNvbik7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgICAgICAgICAgIGxldCB6ID0ge307CiAgICAgICAgICAgICAgICB6Lm5pY2tuYW1lID0gaXRlbS51c2VyLm5pY2tuYW1lOwogICAgICAgICAgICAgICAgei5hdmF0YXJEZXRhaWwgPSBpdGVtLnVzZXIuYXZhdGFyRGV0YWlsLmlkZW50aXR5SWNvblVybDsKICAgICAgICAgICAgICAgIHoubXNnID0gaXRlbS5kYXRhLm1zZzsKICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGF0YS5zb25nICE9IHVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgICAgei5zb25nVXJsID0gaXRlbS5kYXRhLnNvbmcuYWxidW0uYmx1clBpY1VybDsKICAgICAgICAgICAgICAgICAgICB6LnNvbmdJZCA9IGl0ZW0uZGF0YS5zb25nLmlkOwogICAgICAgICAgICAgICAgICAgIHouc29uZ05hbWUgPSBpdGVtLmRhdGEuc29uZy5uYW1lOwogICAgICAgICAgICAgICAgICAgIHouYXJ0aXN0TmFtZSA9IGl0ZW0uZGF0YS5zb25nLmFydGlzdHNbMF0ubmFtZTsgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB6LmZvcndhcmRDb3VudCA9IGl0ZW0uZm9yd2FyZENvdW50OwogICAgICAgICAgICAgICAgei5jb21tZW50Q291bnQgPSBpdGVtLmluZm8uY29tbWVudENvdW50OwogICAgICAgICAgICAgICAgei5saWtlZENvdW50ID0gaXRlbS5pbmZvLmxpa2VkQ291bnQ7CiAgICAgICAgICAgICAgICB6LmF2YXRhclVybCA9IGl0ZW0udXNlci5hdmF0YXJVcmw7CiAgICAgICAgICAgICAgICB6LnBpY3MgPSBpdGVtLnBpY3M7CiAgICAgICAgICAgICAgICBsZXQgYSA9IG5ldyBEYXRlKGl0ZW0uZXZlbnRUaW1lKTsKICAgICAgICAgICAgICAgIHoudGltZSA9IGEudG9Mb2NhbGVEYXRlU3RyaW5nKCkucmVwbGFjZSgvXC8vZywgIi0iKSsiICIrIGEudG9UaW1lU3RyaW5nKCkuc3Vic3RyKDAsIDUpOwogICAgICAgICAgICAgICAgdGhpcy5ldmVudExpc3QucHVzaCh6KTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgICAgICAgYXN5bmMgZ2V0VXNlckRldGFpbCgpewogICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kQVBJLnJlcURldGFpbChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnVVNFUklEJyksbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NPT0tJRScpKTsKICAgICAgICAgICAgbGV0IHggPSB7fTsKICAgICAgICAgICAgeC5pZCA9IHJlc3VsdC51c2VyUG9pbnQudXNlcklkOwogICAgICAgICAgICB4LmxldmVsID0gcmVzdWx0LmxldmVsOwogICAgICAgICAgICB4LnVybCA9IHJlc3VsdC5wcm9maWxlLmF2YXRhclVybDsKICAgICAgICAgICAgeC5mb2xsb3dlZHMgPSByZXN1bHQucHJvZmlsZS5mb2xsb3dlZHM7CiAgICAgICAgICAgIHguZm9sbG93cyA9IHJlc3VsdC5wcm9maWxlLmZvbGxvd3M7CiAgICAgICAgICAgIHguZXZlbnRDb3VudCA9IHJlc3VsdC5wcm9maWxlLmV2ZW50Q291bnQ7CiAgICAgICAgICAgIHgubmFtZSA9IHJlc3VsdC5wcm9maWxlLm5pY2tuYW1lOwogICAgICAgICAgICB0aGlzLnVzZXJJbmZvID0geDsKICAgICAgICB9LAogICAgICAgIC8vIOebkeWQrOmhtemdoua7muWKqAogICAgICAgIGhhbmRsZVNjcm9sbHgoKSB7CiAgICAgICAgICAgIGNvbnN0IGggPSB3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgICAgICAgIGlmKGggPj0gdGhpcy5oZWlnaHQtMjUwMCl7CiAgICAgICAgICAgICAgICB0aGlzLmdldEV2ZW50KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSAgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7CiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgdGhpcy5nZXRFdmVudCgpOwogICAgICAgIHRoaXMuZ2V0VXNlckRldGFpbCgpOwogICAgICAgIC8vIOebkeWQrOW9k+WJjemhtemdoueahHJvbGx5CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsdGhpcy5oYW5kbGVTY3JvbGx4LHRydWUpOwogICAgICAgIC8vIOW8gOWQr+WumuaXtuWZqOS/neivgTJz5YaF5Y+q5Y+R5LiA5qyh6K+35rGCCiAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpPT57CiAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgICAgfSwxMDAwKTsKICAgIH0sCiAgICBiZWZvcmVEZXN0cm95KCl7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Friend/Logged","sourcesContent":["<template>\n  <div class=\"logged\">\n      <div class=\"header\"></div>\n      <div class=\"wrapper clearfix\">\n          <div class=\"mainnerleft clearfix\">\n              <div class=\"tit clearfix\">\n                  <h3><span>动态</span></h3>\n              </div>\n              <ul class=\"mlist clearfix\">\n                  <li v-for=\"item,index in eventList\" :key=\"index\" class=\"item\">\n                      <!-- 头像 -->\n                      <div class=\"g-face\">\n                          <img v-lazy=\"item.avatarUrl\">\n                      </div>\n                      <!-- 内容 -->\n                      <div class=\"g-cnt\">\n                          <!-- 标题 -->\n                        <div class=\"type\">\n                            <span class=\"s-fc underline\">{{item.nickname}}</span>\n                            <i class=\"icn\">\n                                <img v-lazy=\"item.avatarDetail\" style=\"width:15px; position:relative; top:-2px;\">\n                            </i>\n                            <span class=\"sep\">分享单曲</span>\n                        </div>\n                        <!-- 分享时间 -->\n                        <div class=\"time\">\n                            <span>{{item.time}}</span>\n                        </div>\n                        <!-- 文字内容 -->\n                        <div class=\"text\">\n                            <span>{{item.msg}}</span>\n                        </div>\n                        <!-- 单曲 -->\n                        <div class=\"j-flag\" v-if=\"item.songUrl\">\n                            <div class=\"src\">\n                                <!-- 歌曲封面 -->\n                                <div class=\"cover pointer\">\n                                    <img v-lazy=\"item.songUrl\">\n                                    <i class=\"play\"></i>\n                                </div>\n                                <!-- 歌曲信息 -->\n                                <div class=\"scnt\">\n                                    <h3 class=\"title\">\n                                        <span class=\"underline\">{{item.songName}}</span>\n                                    </h3>\n                                    <h4 class=\"from\">\n                                        <span class=\"underline\">{{item.artistName}}</span>\n                                    </h4>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"pics clearfix\">\n                            <li v-for=\"pic,index in item.pics\" :key=\"index\">\n                                <img v-lazy=\"pic.pcSquareUrl\" width=\"224px\">\n                            </li>\n                        </div>\n                        <!-- 交互 -->\n                        <div class=\"doper\">\n                            <span class=\"underline\">评论 ({{item.commentCount}})</span>\n                            <span class=\"line\">|</span>\n                            <span class=\"underline\">转发 ({{item.forwardCount}})</span>\n                            <span class=\"line\">|</span>\n                            <span>\n                                <i></i>\n                                <span class=\"underline\">({{item.likedCount}})</span>\n                            </span>\n                        </div>\n                      </div>\n                  </li>\n              </ul>\n          </div>\n          <div class=\"mainerright\">\n              <div class=\"user\">\n                  <div class=\"cover\">\n                      <router-link to=\"/user/home\"><img v-lazy=\"userInfo.url\"></router-link>\n                  </div>\n                  <router-link to=\"/user/home\"><p class=\"name underline\">{{userInfo.name}}</p></router-link>\n                <ul class=\"clearfix\">\n                  <li>\n                      <div>\n                          <em>{{userInfo.eventCount}}</em>\n                          <span>动态</span>\n                      </div>\n                  </li>\n                  <li>\n                      <div>\n                          <em>{{userInfo.follows}}</em>\n                          <span>关注</span>\n                      </div>\n                  </li>\n                  <li>\n                      <div>\n                          <em>{{userInfo.followeds}}</em>\n                          <span>粉丝</span>\n                      </div>\n                  </li>\n                </ul>\n              </div>\n\n          </div>\n      </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    name:'logged',\n    data() {\n        return {\n            // 动态数量\n            pageSize:20,\n            lasttime:-1,\n            //动态内容\n            eventList:[],\n            // 用户信息\n            userInfo:{},\n            //是否能发请求\n            flag:true,\n            // 页面高度\n            height:1000000,\n            // 定时器\n            timer:[],\n        }\n    },\n    methods:{\n        //获取好友动态\n        async getEvent(){\n            if(this.flag == false) return ;\n            this.flag = false;\n            let result = await this.$API.reqEvent(this.pageSize,localStorage.getItem('COOKIE'),this.lasttime);\n            let x = result.event;\n            this.lasttime = result.lasttime;\n            x.forEach((item)=>{\n                item.data = JSON.parse(item.json);\n                // console.log(item);\n                let z = {};\n                z.nickname = item.user.nickname;\n                z.avatarDetail = item.user.avatarDetail.identityIconUrl;\n                z.msg = item.data.msg;\n                if(item.data.song != undefined){\n                    z.songUrl = item.data.song.album.blurPicUrl;\n                    z.songId = item.data.song.id;\n                    z.songName = item.data.song.name;\n                    z.artistName = item.data.song.artists[0].name;    \n                }\n                z.forwardCount = item.forwardCount;\n                z.commentCount = item.info.commentCount;\n                z.likedCount = item.info.likedCount;\n                z.avatarUrl = item.user.avatarUrl;\n                z.pics = item.pics;\n                let a = new Date(item.eventTime);\n                z.time = a.toLocaleDateString().replace(/\\//g, \"-\")+\" \"+ a.toTimeString().substr(0, 5);\n                this.eventList.push(z);\n            })\n             \n        },\n        // 获取用户信息\n        async getUserDetail(){\n            let result = await this.$API.reqDetail(localStorage.getItem('USERID'),localStorage.getItem('COOKIE'));\n            let x = {};\n            x.id = result.userPoint.userId;\n            x.level = result.level;\n            x.url = result.profile.avatarUrl;\n            x.followeds = result.profile.followeds;\n            x.follows = result.profile.follows;\n            x.eventCount = result.profile.eventCount;\n            x.name = result.profile.nickname;\n            this.userInfo = x;\n        },\n        // 监听页面滚动\n        handleScrollx() {\n            const h = window.pageYOffset;\n            if(h >= this.height-2500){\n                this.getEvent();\n            }\n            this.height =  document.body.scrollHeight;\n        },\n    },\n    mounted(){\n        this.getEvent();\n        this.getUserDetail();\n        // 监听当前页面的rolly\n        window.addEventListener('scroll',this.handleScrollx,true);\n        // 开启定时器保证2s内只发一次请求\n        this.timer = setInterval(()=>{\n            this.flag = true;\n        },1000);\n    },\n    beforeDestroy(){\n        clearInterval(this.timer);\n    }\n}\n</script>\n\n<style lang='less' scoped>\n    .logged{\n        width: 100%;\n        .header{\n            height: 5px;\n            width: 100%;\n            position: relative;\n            top: 0;\n            background-color: #C20C0C;\n        }\n        .wrapper{\n            width: 982px;\n            margin: 0 auto;\n            min-height: 700px;\n            border: 1px solid #d3d3d3;\n            border-width: 0 1px;\n            background: url('../images/wrap5.png') repeat-y center 0;\n            .mainnerleft{\n                width: 680px;\n                padding: 20px 30px;\n                float: left;\n                .tit{\n                    width: 100%;\n                    height: 42px;\n                    border-bottom: 2px solid #c20c0c;\n                    h3{\n                        font-size: 24px;\n                        font-weight: normal;\n                        color: #333;\n                    }\n                }\n                .mlist{\n                    width: 100%;\n                    position: relative;\n                    padding-top: 20px;\n                    .item{\n                        width: 100%;\n                        display: block;\n                        padding: 20px 0;\n                        position: relative;\n                        border-color: #e8e8e9;\n                        border-bottom: 1px solid;\n                        .g-face{\n                            position: absolute;\n                            top: 20px;\n                            left: 0;\n                            width: 54px;\n                            height: 45px;\n                            img{\n                                width: 45px;\n                                height: 45px;\n                            }\n                        }\n                        .g-cnt{\n                            margin-left: 55px;\n                            width: 565px;\n                            padding-top: 4px;\n                            .type{\n                                width: 100%;\n                                position: relative;\n                                font-size: 14px;\n                                font-family: Arial, Helvetica, sans-serif;\n                                -webkit-text-size-adjust: none;\n                                .s-fc{\n                                    color: #0c73c2;\n                                }\n                                .icn{\n                                    width: 15px;\n                                    height: 15px;\n                                    display: inline-block;\n                                    margin-left: 2px;\n                                }\n                                .sep{\n                                    margin-left: 5px;\n                                }\n                            }\n                            .time{\n                                margin-top: 7px;\n                                color: #999;\n                            }\n                            .text{\n                                width: 100%;\n                                margin-top: 10px;\n                                line-height: 24px;\n                                font-size: 14px;\n                                word-break: break-word;\n                                white-space: normal;\n                                color: #333;\n                            }\n                            .j-flag{\n                                width: 565px;\n                                height: 60px;\n                                .src{\n                                    width: 100%;\n                                    height: 100%;\n                                    display: block;\n                                    position: relative;\n                                    padding: 10px;\n                                    margin: 4px 0 5px;\n                                    background: #f5f5f5;\n                                    .cover{\n                                        width: 40px;\n                                        height: 40px;\n                                        position: relative;\n                                        img{\n                                            width: 40px;\n                                            height: 40px;\n                                        }\n                                        .play{\n                                            width: 40px;\n                                            height: 40px;\n                                            display: block;\n                                            position: absolute;\n                                            top: 0;\n                                            left: 0;\n                                            opacity: 0.8;\n                                            z-index: 10;\n                                            background: url('../images/frd_dyn_sprite.png') no-repeat -100px -70px;\n                                            &:hover{\n                                                opacity: 1.0;\n                                            }\n                                        }\n                                    }\n                                }\n                                .scnt{\n                                    width: 475px;\n                                    height: 40px;\n                                    position: absolute;\n                                    top: 10px;\n                                    right: 30px;\n                                    .title{\n                                        line-height: 22px;\n                                        overflow: hidden;\n                                        text-overflow: ellipsis;\n                                        white-space: nowrap;\n                                        word-wrap: normal;\n                                        font-weight: normal;\n                                        color: #333;\n                                        margin-top: -2px;\n                                    }\n                                    .from{\n                                        color: #666;\n                                        font-weight: normal;\n                                        line-height: 22px;\n                                    }\n                                }\n                            }\n                            .pics{\n                                margin-top: 10px;\n                            }\n                            .doper{\n                                width: 100%;\n                                height: 16px;\n                                margin-top: 18px;\n\n                                span{\n                                    float: right;\n                                    color: #0c73c2;\n                                }\n                                .line{\n                                    color: #c7c7c7;\n                                    margin:0 10px 0 12px;\n                                }\n                                i{\n                                    margin: 1px 3px 0 0;\n                                    position: relative;\n                                    top: 0px;\n                                    width: 14px;\n                                    height: 14px;\n                                    display: inline-block;\n                                    background: url('../images/frd_dyn_sprite.png') no-repeat 0 -20px;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            .mainerright{\n                width: 298px;\n                float: left;\n                .user{\n                    width: 100%;\n                    height: 193px;\n                    padding: 35px 30px 5px;\n                    position: relative;\n                    background: url('../images/frduser.png') repeat-x 0 0;\n                    .cover{\n                        float: left;\n                        width: 70px;\n                        height: 70px;\n                        img{\n                            display: block;\n                            width: 100%;\n                            height: 100%;\n                            padding: 2px;\n                            background: #fff;\n                            border: 1px solid #dadada;\n                        }\n                    }\n                    .name{\n                        float: left;\n                        color: #333;\n                        font-size: 14px;\n                        font-weight: bold;\n                        margin-left: 12px;\n                        margin-top: 4px;\n                    }\n                    >ul{\n                        position: absolute;\n                        bottom: 15px;\n                        left: 17px;\n                        float: left;\n                        li{\n                            display: inline;\n                            float: left;\n                            margin: 0 2px 0 -2px;\n                            border-left: 1px solid #c2c2c2;\n                            color: #666;\n                            div{\n                                height: 45px;\n                                padding: 0 20px;\n                                em{\n                                    display: block;\n                                    height: 29px;\n                                    padding-bottom: 9px;\n                                   \n                                    font-size: 20px;\n                                    line-height: 20px;\n                                    font-family: Arial;\n                                }\n                                span{\n                                    padding-left: 2px;\n                                }\n                            }\n                            &:hover{\n                                color: #0c73c2;\n                                cursor: pointer;\n                            }\n                        }\n                        li:first-child{\n                            border-left: none;\n                        }\n                    }\n                }\n\n            }\n        }\n    }\n</style>"]}]}