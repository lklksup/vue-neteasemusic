{"remainingRequest":"D:\\test1\\cloud-master\\cloud-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test1\\cloud-master\\cloud-master\\src\\views\\Song\\MainerLeft\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test1\\cloud-master\\cloud-master\\src\\views\\Song\\MainerLeft\\index.vue","mtime":1654515726000},{"path":"D:\\test1\\cloud-master\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test1\\cloud-master\\cloud-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\test1\\cloud-master\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test1\\cloud-master\\cloud-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMeXJpYyBmcm9tICdseXJpYy1wYXJzZXInCmltcG9ydCBDb21tZW50IGZyb20gJy4vQ29tbWVudCcKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTonbWFpbmVybGVmdCcsCiAgICBjb21wb25lbnRzOntDb21tZW50fSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLy8g5q2M6K+NCiAgICAgICAgICAgIGN1cnJlbnRMeXJpYzp7fSwKICAgICAgICAgICAgLy8g5q2M5puy6K+m5oOFCiAgICAgICAgICAgIHNvbmdEZXRhaWw6e30sCiAgICAgICAgICAgIC8vIOaYvuekuuS4gOWNiuatjOivjQogICAgICAgICAgICBoYWxmbHlyaWM6dHJ1ZSwKICAgICAgICAgICAgLy8g6K+E6K665pWwCiAgICAgICAgICAgIGNvbW1lbnRudW06MCwKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICAgIGlkKCl7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5xdWVyeS5pZCB8fCAxOTE1Mjk3MDMzOwogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDp7CiAgICAgICAgaWQoKXsKICAgICAgICAgICAgdGhpcy5nZXRseXJpYygpOwogICAgICAgICAgICB0aGlzLmdldFNvbmdEZXRhaWwoKTsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgLy8g6I635Y+W5q2M5puy6K+m5oOFCiAgICAgICAgYXN5bmMgZ2V0U29uZ0RldGFpbCgpewogICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kQVBJLnJlcVNvbmcodGhpcy5pZCxsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQ09PS0lFJykpOwogICAgICAgICAgICB0aGlzLnNvbmdEZXRhaWwgPSByZXN1bHQuc29uZ3NbMF07CiAgICAgICAgfSwKICAgICAgICAvLyDojrflj5bmrYzor40KICAgICAgICBhc3luYyBnZXRseXJpYygpewogICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kQVBJLnJlcWx5cmljKHRoaXMuaWQpOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRMeXJpYyA9ICBuZXcgTHlyaWMocmVzdWx0LmxyYy5seXJpYywgdGhpcy5seXJpY0hhbmRsZSkKICAgICAgICB9LAogICAgICAgIC8vIOatjOivjeWbnuiwgwogICAgICAgIGx5cmljSGFuZGxlKHsgbGluZU51bSwgdHh0IH0pIHsKICAgICAgICAgICAgY29uc29sZS5sb2cobGluZU51bSkKICAgICAgICAgICAgLy8gaWYgKCF0aGlzLiRyZWZzLmx5cmljTGluZSkgewogICAgICAgICAgICAvLyAgICAgcmV0dXJuCiAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgdGhpcy5jdXJyZW50THlyaWNOdW0gPSBsaW5lTnVtOwogICAgICAgICAgICAvLyBpZihsaW5lTnVtID4gMTApIHsKICAgICAgICAgICAgLy8gICAgIGxldCBsaW5lRWwgPSB0aGlzLiRyZWZzLmx5cmljTGluZVtsaW5lTnVtIC0gMTBdCiAgICAgICAgICAgIC8vICAgICBpZiAodGhpcy4kcmVmcy5seXJpY0xpc3QpIHsKICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuJHJlZnMubHlyaWNMaXN0LnNjcm9sbFRvRWxlbWVudChsaW5lRWwsIDEwMDApCiAgICAgICAgICAgIC8vICAgICAgICAgfSkKICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgLy8gICAgIGlmICh0aGlzLiRyZWZzLmx5cmljTGlzdCkgewogICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy4kcmVmcy5seXJpY0xpc3Quc2Nyb2xsVG8oMCwgMCwgMTAwMCkKICAgICAgICAgICAgLy8gICAgICAgICB9KQogICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIHRoaXMucGxheWluZ0x5cmljID0gdHh0OwogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W6K+E6K665pWwCiAgICAgICAgQ29tbWVudE51bShkYXRhKXsKICAgICAgICAgICAgdGhpcy5jb21tZW50bnVtID0gZGF0YTsKICAgICAgICB9LAogICAgICAgIC8vIOa3u+WKoOmfs+S5kOiHs+aSreaUvuWIl+ihqAogICAgICAgIGFkZE11c2ljTGlzdChpZHMpewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWRkTXVzaWNMaXN0JyxpZHMpOwogICAgICAgIH0sCiAgICAgICAgLy8g6K6+572u5b2T5YmN5pKt5pS+55qE6Z+z5LmQCiAgICAgICAgc2V0TXVzaWMoaWQpewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0TXVzaWNzJyxpZCk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZGRNdXNpY0xpc3QnLGlkKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3BsYXknKTsgICAgCiAgICAgICAgICAgIH0sIDUwMCk7ICAgICAgCiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgdGhpcy5nZXRseXJpYygpOwogICAgICAgIHRoaXMuZ2V0U29uZ0RldGFpbCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Song/MainerLeft","sourcesContent":["<template>\n  <div class=\"mainerleft\">\n      <div class=\"info clearfix\" v-show=\"id\">\n          <div class=\"cover\">\n              <img v-lazy=\"songDetail.al.picUrl\" v-if=\"songDetail.al\">\n              <span class=\"msk\"></span>\n          </div>\n          <div class=\"cnt\">\n              <div class=\"hd\">\n                  <i class=\"icn\"></i>\n                  <em class=\"tit\">{{songDetail.name}}</em>\n              </div>\n                <p class=\"des\">歌手：\n                     <router-link :to=\"{path:'/artist/song',query:{id:songDetail.ar[0].id}}\" :title=\"songDetail.ar[0].name\" class=\"underline\" v-if=\"songDetail.ar\">\n                        {{songDetail.ar[0].name}}\n                     </router-link>\n                </p>\n              <p class=\"des\">所属专辑：\n                    <router-link :to=\"{path:'/album',query:{id:`${songDetail.al.id}`}}\" class=\"underline\" v-if=\"songDetail.al\"> {{songDetail.al.name}}</router-link>\n                </p>\n              <!-- 底部按钮 -->\n                <div class=\"btns\">\n                    <a class=\"play\" title=\"播放\"  @click=\"setMusic(id)\">\n                        <i class=\"ply\"></i>\n                        <span>播放</span>\n                    </a>\n                    <a class=\"add\" title=\"添加到播放列表\"  @click=\"addMusicList(id)\"></a>\n                    <a class=\"dis\">\n                        <span>收藏</span>\n                    </a>\n                    <a class=\"share\">\n                        <span>分享</span>\n                    </a>\n                    <a class=\"download\">\n                        <span>下载</span>\n                    </a>\n                    <a class=\"comment\">\n                        <span>({{commentnum}})</span>\n                    </a>\n                </div>\n                <div class=\"lyric\">\n                    <div class=\"desc-dot\" v-show=\"halflyric\" v-if=\"currentLyric.lines\">\n                        <p v-for=\"text,index in currentLyric.lines.slice(0,currentLyric.lines.length/4)\" :key=\"index\">\n                            {{text.txt}}\n                        </p>\n                        <a class=\"underline\" @click=\"halflyric=false\">展开\n                            <i class=\"down\"></i>\n                        </a>\n                    </div>\n                    <div class=\"desc-more\" v-show=\"!halflyric\">\n                        <p v-for=\"text,index in currentLyric.lines\" :key=\"index\">\n                            {{text.txt}}\n                        </p>\n                        <a class=\"underline\" @click=\"halflyric=true\">收起\n                            <i class=\"up\"></i>\n                        </a>\n                    </div>\n                </div>\n          </div>\n      </div>\n        <Comment @CommentNum='CommentNum'></Comment>\n  </div>\n</template>\n\n<script>\nimport Lyric from 'lyric-parser'\nimport Comment from './Comment'\nexport default {\n    name:'mainerleft',\n    components:{Comment},\n    data() {\n        return {\n            // 歌词\n            currentLyric:{},\n            // 歌曲详情\n            songDetail:{},\n            // 显示一半歌词\n            halflyric:true,\n            // 评论数\n            commentnum:0,\n        }\n    },\n    computed:{\n        id(){\n            return this.$route.query.id || 1915297033;\n        }\n    },\n    watch:{\n        id(){\n            this.getlyric();\n            this.getSongDetail();\n        }\n    },\n    methods:{\n        // 获取歌曲详情\n        async getSongDetail(){\n            let result = await this.$API.reqSong(this.id,localStorage.getItem('COOKIE'));\n            this.songDetail = result.songs[0];\n        },\n        // 获取歌词\n        async getlyric(){\n            let result = await this.$API.reqlyric(this.id);\n            this.currentLyric =  new Lyric(result.lrc.lyric, this.lyricHandle)\n        },\n        // 歌词回调\n        lyricHandle({ lineNum, txt }) {\n            console.log(lineNum)\n            // if (!this.$refs.lyricLine) {\n            //     return\n            // }\n            this.currentLyricNum = lineNum;\n            // if(lineNum > 10) {\n            //     let lineEl = this.$refs.lyricLine[lineNum - 10]\n            //     if (this.$refs.lyricList) {\n            //         this.$nextTick(() => {\n            //             this.$refs.lyricList.scrollToElement(lineEl, 1000)\n            //         })\n            //     }\n            // } else {\n            //     if (this.$refs.lyricList) {\n            //         this.$nextTick(() => {\n            //             this.$refs.lyricList.scrollTo(0, 0, 1000)\n            //         })\n            //     }\n            // }\n            this.playingLyric = txt;\n        },\n        // 获取评论数\n        CommentNum(data){\n            this.commentnum = data;\n        },\n        // 添加音乐至播放列表\n        addMusicList(ids){\n            this.$store.dispatch('addMusicList',ids);\n        },\n        // 设置当前播放的音乐\n        setMusic(id){\n            this.$store.dispatch('setMusics',id);\n            this.$store.dispatch('addMusicList',id);\n            setTimeout(() => {\n                this.$bus.$emit('play');    \n            }, 500);      \n        },\n    },\n    mounted(){\n        this.getlyric();\n        this.getSongDetail();\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n    .mainerleft{\n        padding: 37px 30px 40px 39px;\n        width: 709px;\n        float: left;\n        .info{\n            width: 100%;\n            .cover{\n                float: left;\n                width: 198px;\n                height: 198px;\n                position: relative;\n                img{\n                    width:130px;\n                    height: 130px;\n                    margin: 34px;\n                }\n                .msk{\n                    display: block;\n                    width: 206px;\n                    height: 205px;\n                    position: absolute;\n                    top: -4px;\n                    left: -4px;\n                    background: url('../images/coverall.png') no-repeat -140px -580px;;\n                }\n            }\n            .cnt{\n                width: 414px;\n                float: right;\n                .hd{\n                    width: 100%;\n                    height: 32px;\n                    .icn{\n                        display: block;\n                        float: left;\n                        width: 54px;\n                        height: 24px;\n                        background: url('../images/icon.png') no-repeat 0 -463px;;\n                    }\n                    .tit{\n                        margin-left: 10px;\n                        vertical-align: middle;\n                        font-family: \"Microsoft Yahei\", Arial, Helvetica, sans-serif;\n                        font-style: normal;\n                        text-align: left;\n                        font-size: 24px;\n                        line-height: 0px;\n                    }\n\n                }\n                .des{\n                    height: 16px;\n                    margin: 10px 0;\n                    width: 100%;\n                    color: #999;\n                    a{\n                        color: #0c73c2;\n                        &:hover{\n                            color: #0c73c2;;\n                        }\n                    }\n                }\n                .btns{\n                    height: 31px;\n                    display: flex;\n\n                    .play{\n                        width: 66px;\n                        padding-left: 5px;\n                        background: url('../images/button2.png') no-repeat 0 -1652px;;\n                        text-align: center;\n                        line-height: 31px;\n                        height: 31px;\n                        border-top-left-radius: 5px;\n                        border-bottom-left-radius: 5px;\n\n                        i{\n                            width: 20px;\n                            height: 18px;\n                            margin: 6px 2px 2px 0;\n                            float: left;\n                            background: url('../images/button2.png') no-repeat 0 -1622px;\n                        }\n\n                        span{\n                            color: #fff;\n                        }\n                        &:hover{\n                            cursor: pointer;  \n                        }\n                    }\n\n                    .add{\n                        width: 31px;\n                        height: 31px;\n                        margin-right: 5px;\n                        background: url('../images/button2.png') no-repeat 0 -1588px;\n                        \n                        &:hover{\n                            cursor: pointer;\n                            background-position: -40px -1588px;  \n                        }\n                        &:active{\n                            background-position: -80px -1588px;  \n                        }\n                    }\n\n                    .dis{\n                        // width: 92.6px;\n                        // padding-right: 5px;\n                        margin-right: 6px;\n                        height: 100%;\n                        background: url('../images/button2.png') no-repeat;\n                        background-position: 0px -977px;\n                        span{\n                            padding-right: 10px;\n                            display: inline-block;\n                            height: 100%;\n                            width: 100%;\n                            background: url('../images/button2.png') no-repeat right -1106px;\n                            line-height: 30px;\n                            padding-left: 30px;\n                        }\n                        &:hover{\n                             background-position: 0px -1063px;\n                            color:#666;\n                            cursor:pointer;\n                        }\n                    }\n                    \n                    .share{\n                        height: 31px;\n                        margin-right: 6px;\n                        float: left;\n                        line-height: 30px;\n                        min-width: 23px;\n                        cursor: pointer;\n                        background: url('../images/button2.png') no-repeat;\n                        background-position: 0 -1225px;\n\n                        span{\n                            padding-right: 10px;\n                            width: 100%;\n                            height: 100%;\n                            display: inline-block;\n                            line-height: 30px;\n                            padding-left: 28px;\n                            background: url('../images/button2.png') no-repeat;\n                            background-position: right -1020px;\n                        }\n                        \n                        &:hover{\n                            color:#666;\n                            cursor: pointer;\n                        }\n                    }\n\n                    .download{\n                        margin-right: 5px;\n                        width: 60px;\n                        height: 31px;\n                        line-height: 30px;\n                        min-width: 23px;\n                        cursor: pointer;\n                        background: url('../images/button2.png') no-repeat;\n                        background-position: 0 -2761px;\n\n                        span{\n                            width: 100%;\n                            height: 100%;\n                            display: inline-block;\n                            line-height: 30px;\n                            padding-left: 28px;\n                            background: url('../images/button2.png') no-repeat;\n                            background-position: right -1020px;\n                        }\n                        &:hover{\n                            color:#666;\n                            cursor: pointer;\n                        }\n                    }\n\n                    .comment{\n                        margin-right: 5px;\n                        \n                        height: 31px ;\n                        line-height: 30px;\n                        min-width: 23px;\n                        cursor: pointer;\n                        background: url('../images/button2.png') no-repeat;\n                        background-position: 0 -1465px;\n\n                        span{\n                            // width: 100%;\n                            padding-right: 10px;\n                            height: 100%;\n                            display: inline-block;\n                            line-height: 30px;\n                            padding-left: 28px;\n                            background: url('../images/button2.png') no-repeat;\n                            background-position: right -1020px;\n                        }\n                        &:hover{\n                            color:#666;\n                            cursor: pointer;\n                        }\n                    }\n                }\n            }\n            .lyric{\n                float: left;\n                margin-top: 40px;\n                width: 100%;\n                .desc-dot,\n                .desc-more{\n                    p{\n                        margin: 5px 0;\n                        color: #000;\n                    }\n                    a{\n                        float: left;\n                        color: #0c73c2;\n                        .down{\n                            display: inline-block;\n                            width: 11px;\n                            height: 8px;\n                            background: url('../images/icon.png') no-repeat;\n                            background-position: -65px -520px;\n                        }\n                        .up{\n                            display: inline-block;\n                            width: 11px;\n                            height: 8px;\n                            background: url('../images/icon.png') no-repeat;\n                            background-position: -45px -520px;\n                        }\n                        &:hover{\n                            color: #0c73c2;;\n                        }\n                    }\n                }\n            }\n        }\n    }\n</style>"]}]}