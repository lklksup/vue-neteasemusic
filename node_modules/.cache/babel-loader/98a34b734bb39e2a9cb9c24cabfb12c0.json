{"remainingRequest":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\babel-loader\\lib\\index.js!D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test1\\vue-neteasemusic\\cloud-master\\src\\views\\User\\Home\\Songs\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\src\\views\\User\\Home\\Songs\\index.vue","mtime":1654515726000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\babel.config.js","mtime":1654515726000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test1\\vue-neteasemusic\\cloud-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3Rlc3QxL3Z1ZS1uZXRlYXNlbXVzaWMvY2xvdWQtbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzb25ncycsCiAgcHJvcHM6IFsnbGlzdGVuU29uZ3MnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g55So5oi35pKt5pS+5ZGo5pWw5o2uCiAgICAgIHdlZWtEYXRhOiBbXSwKICAgICAgLy8g55So5oi35pKt5pS+5omA5pyJ5pWw5o2uCiAgICAgIGFsbERhdGE6IFtdLAogICAgICAvLyDlsZXnpLrmlbDmja4KICAgICAgc2hvd0RhdGE6IFtdLAogICAgICBsZW5ndGg6IDAsCiAgICAgIC8vIOaYr+WQpuWxleekuuacgOi/keS4gOWRqOeahOaVsOaNrgogICAgICBpc1dlZWs6IHRydWUKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaWQ6IGZ1bmN0aW9uIGlkKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUucXVlcnkuaWQgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1VTRVJJRCcpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W55So5oi35pKt5pS+6K6w5b2VCiAgICBnZXRVc2VyUmVjb3JkOiBmdW5jdGlvbiBnZXRVc2VyUmVjb3JkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzdWx0LCByZXN1bHQyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRBUEkucmVxVXNlclJlY29yZChfdGhpcy5pZCwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NPT0tJRScpLCAxKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRBUEkucmVxVXNlclJlY29yZChfdGhpcy5pZCwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0NPT0tJRScpLCAwKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzdWx0MiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy53ZWVrRGF0YSA9IHJlc3VsdC53ZWVrRGF0YS5zbGljZSgwLCAxMCk7CiAgICAgICAgICAgICAgICBfdGhpcy5hbGxEYXRhID0gcmVzdWx0Mi5hbGxEYXRhLnNsaWNlKDAsIDEwKTsKICAgICAgICAgICAgICAgIF90aGlzLnNob3dEYXRhID0gX3RoaXMud2Vla0RhdGE7CgogICAgICAgICAgICAgICAgX3RoaXMuc2hvd1NvbmdUaW1lcygxMDApOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOWKqOaAgeWxleekuuWQrOatjOasoeaVsAogICAgc2hvd1NvbmdUaW1lczogZnVuY3Rpb24gc2hvd1NvbmdUaW1lcyh0aW1lcikgewogICAgICB0aGlzLnNob3dEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgeCA9IGl0ZW0uc2NvcmU7CiAgICAgICAgaXRlbS5zY29yZSA9IDA7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpdGVtLnNjb3JlID0geDsKICAgICAgICB9LCB0aW1lcik7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaUueWPmOiusOW9leaXtumXtAogICAgY2hhbmdlVGltZTogZnVuY3Rpb24gY2hhbmdlVGltZSh0aW1lKSB7CiAgICAgIGlmICh0aW1lID09ICd3ZWVrJyAmJiB0aGlzLndlZWtEYXRhICE9IHRoaXMuc2hvd0RhdGEpIHsKICAgICAgICB0aGlzLnNob3dEYXRhID0gdGhpcy53ZWVrRGF0YTsKICAgICAgICB0aGlzLnNob3dTb25nVGltZXMoMCk7CiAgICAgICAgdGhpcy5pc1dlZWsgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHRpbWUgPT0gImFsbCIgJiYgdGhpcy5hbGxEYXRhICE9IHRoaXMuc2hvd0RhdGEpIHsKICAgICAgICB0aGlzLnNob3dEYXRhID0gdGhpcy5hbGxEYXRhOwogICAgICAgIHRoaXMuc2hvd1NvbmdUaW1lcygwKTsKICAgICAgICB0aGlzLmlzV2VlayA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgLy8g6K6+572u5b2T5YmN5pKt5pS+55qE6Z+z5LmQCiAgICBzZXRNdXNpYzogZnVuY3Rpb24gc2V0TXVzaWMoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0TXVzaWNzJywgaWQpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWRkTXVzaWNMaXN0JywgaWQpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJGJ1cy4kZW1pdCgncGxheScpOwogICAgICB9LCA1MDApOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlclJlY29yZCgpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACAA,eADA;AAEAC,wBAFA;AAGAC,MAHA,kBAGA;AACA;AACA;AACAC,kBAFA;AAGA;AACAC,iBAJA;AAKA;AACAC,kBANA;AAOAC,eAPA;AAQA;AACAC;AATA;AAWA,GAfA;AAgBAC;AACAC,MADA,gBACA;AACA;AACA;AAHA,GAhBA;AAqBAC;AACA;AACAC,iBAFA,2BAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,qEADA;;AAAA;AACAC,sBADA;AAAA;AAAA,uBAEA,qEAFA;;AAAA;AAEAC,uBAFA;AAGA;AACA;AACA;;AACA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KATA;AAUA;AACAC,iBAXA,yBAWAC,KAXA,EAWA;AACA;AACA;AACAC;AACAC;AACAD;AACA,SAFA,EAEAD,KAFA;AAGA,OANA;AAQA,KApBA;AAqBA;AACAG,cAtBA,sBAsBAC,IAtBA,EAsBA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AAEA,KAjCA;AAkCA;AACAC,YAnCA,oBAmCAX,EAnCA,EAmCA;AAAA;;AACA;AACA;AACAQ;AACA;AACA,OAFA,EAEA,GAFA;AAGA;AAzCA,GArBA;AAgEAI,SAhEA,qBAgEA;AACA;AACA;AAlEA","names":["name","props","data","weekData","allData","showData","length","isWeek","computed","id","methods","getUserRecord","result","result2","showSongTimes","timer","item","setTimeout","changeTime","time","setMusic","mounted"],"sourceRoot":"src/views/User/Home/Songs","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"songlist clearfix\">\n      <div class=\"header\">\n          <h3>\n              <span class=\"ff2\">听歌排行</span>\n          </h3>\n          <h4>累积听歌{{listenSongs}}首</h4>\n          <span class=\"point\">\n              <a class=\"icon pointer\"></a>\n              <div class=\"tip\">\n                  <p>实际播放时间过短的歌曲将不纳入计算</p>\n                  <i class=\"t\"></i>\n                  <i class=\"b\"></i>\n              </div>\n          </span>\n          <div class=\"nav clearfix\">\n              <span class=\"pointer\" :class=\"{active:!isWeek}\" @click=\"changeTime('all')\">所有时间</span>\n              <span class=\"line\">|</span>\n              <span class=\"pointer\" :class=\"{active:isWeek}\" @click=\"changeTime('week')\">最近一周</span>\n          </div>\n      </div>\n      <div class=\"flag\">\n          <div class=\"songs\">\n            <ul v-for=\"data,index in showData\" :key=\"index\">\n                <li class=\"m1\">\n                    <span>{{index+1}}.</span>\n                    <i class=\"play\" @click=\"setMusic(data.song.id)\"></i>\n                </li>\n                <li class=\"m2\">\n                    <router-link :to=\"{path:'/song',query:{id:`${data.song.id}`}}\">{{data.song.name}}</router-link>\n                    <span>-</span>\n                    <router-link :to=\"{path:'/artist/song',query:{id:data.song.ar[0].id}}\" :title=\"data.song.ar[0].name\" class=\"art\">{{data.song.ar[0].name}}</router-link>\n                    <i class=\"mv\"></i>\n                </li>\n                <li class=\"m3\">\n                    <div class=\"show\">\n                        <a title=\"添加到播放列表\" class=\"a1\"></a>\n                        <a title=\"收藏\" class=\"a2\"></a>\n                        <a title=\"分享\" class=\"a3\"></a>\n                        <a title=\"下载\" class=\"a4\"></a>\n                    </div>\n                </li>\n                <div class=\"tops\">\n                    <span class=\"bg\" :style=\"'width:'+data.score+'%;'\"></span>\n                    <div class=\"times\">{{data.playCount}}次</div>\n                </div>\n            </ul>                           \n          </div>\n\n          <div class=\"more\">\n              <a class=\"underline\"> 查看更多&gt;</a>\n          </div>\n      </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    name:'songs',\n    props:['listenSongs'],\n    data() {\n        return {\n            // 用户播放周数据\n            weekData:[],\n            // 用户播放所有数据\n            allData:[],\n            // 展示数据\n            showData:[],\n            length:0,\n            // 是否展示最近一周的数据\n            isWeek:true,\n        }\n    },\n    computed:{\n        id(){\n            return this.$route.query.id || localStorage.getItem('USERID');\n        }\n    },\n    methods:{\n        // 获取用户播放记录\n        async getUserRecord(){\n            let result = await this.$API.reqUserRecord(this.id,localStorage.getItem('COOKIE'),1);\n            let result2 = await this.$API.reqUserRecord(this.id,localStorage.getItem('COOKIE'),0);\n            this.weekData = result.weekData.slice(0,10);\n            this.allData = result2.allData.slice(0,10);\n            this.showData = this.weekData;\n            this.showSongTimes(100);\n        },\n        // 动态展示听歌次数\n        showSongTimes(timer){\n            this.showData.forEach((item)=>{\n                let x = item.score;\n                item.score = 0;\n                setTimeout(()=>{\n                    item.score = x;\n                },timer);    \n            })\n            \n        },\n        // 改变记录时间\n        changeTime(time){\n            if(time == 'week' && this.weekData != this.showData){\n               this.showData = this.weekData; \n               this.showSongTimes(0);\n               this.isWeek = true;\n            }else if(time==\"all\" && this.allData != this.showData){\n                this.showData = this.allData;\n                this.showSongTimes(0);\n                this.isWeek = false;\n            }\n                \n        },        \n        // 设置当前播放的音乐\n        setMusic(id){\n            this.$store.dispatch('setMusics',id);\n            this.$store.dispatch('addMusicList',id);\n            setTimeout(() => {\n                this.$bus.$emit('play');    \n            }, 500);      \n        },\n    },\n    mounted(){\n        this.getUserRecord();\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n    .songlist{\n        width: 100%;\n        .header{\n            width: 900px;\n            height: 35px;\n            position: relative;\n            z-index: 2;\n            border-bottom: 2px solid #c20c0c;\n            h3{\n                font-size: 20px;\n                line-height: 28px;\n                font-weight: normal;\n                float: left;\n                color: #666;\n            }\n            h4{\n                float: left;\n                display: inline;\n                margin-top: 5px;\n                margin-left: 10px;\n                line-height: 26px;\n                font-weight: 400;\n                color: #666;\n            }\n            .point{\n                position: relative;\n                margin-left: 10px;\n                left: -1px;\n                top: 8px;\n                line-height: 18px;\n                z-index: 2;\n                .icon{\n                    width: 18px;\n                    height: 18px;\n                    display: inline-block;\n                    overflow: hidden;\n                    vertical-align: middle;\n                    background: url('../../images/icon2.png') no-repeat 0 -50px;    \n                    &:hover{\n                        background: url('../../images/icon2.png') no-repeat -20px -50px;    \n                    }\n                }\n                .tip{\n                    position: absolute;\n                    left: -33px;\n                    top: 30px;\n                    display: none;\n                    width: 333px;\n                    height: 35px;\n                    font-size: 12px;\n                    line-height: 20px;\n                    padding: 8px 19px 7px 19px;\n                    z-index: 2;\n                    color: #666;\n                    background: url('../../images/top_m.png') repeat-y 0 0;\n                    .t{\n                        position: absolute;\n                        width: 327px;\n                        height: 16px;\n                        left: 0;\n                        top: -16px;\n                        background: url('../../images/top_t.png') no-repeat 0 0;\n                    }\n                    .b{\n                        position: absolute;\n                        width: 327px;\n                        height: 12px;\n                        left: 0;\n                        bottom: -12px;\n                        background: url('../../images/top_b.png') no-repeat 0 0;\n                    }\n                }\n                &:hover .tip{\n                    display: block;\n                }\n            }\n            .nav{\n                float: right;\n                span{\n                    float: right;\n                    line-height: 35px;\n                }\n                .line{\n                    margin: 0 10px;\n                }\n                .active{\n                    color: #000;\n                    font-weight: 700;\n                }\n            }\n        }\n        .flag{\n            width: 100%;\n            height: 413px;\n            .songs{\n                width: 100%;\n                height: 381px;\n                border: 1px solid #e2e2e2;\n                border-top: none;\n                ul{\n                    height: 38px;\n                    width: 100%;\n                    position: relative;\n                    background-color: #fefefe;\n                    &:hover{\n                        background-color: #eee;\n                    }\n                    &:hover .show{\n                        display: block !important;\n                    }\n                    li{\n                        padding:6px 10px;\n                        float: left;\n                    }\n                    \n                    .m1{\n                        width: 72px;\n                        height: 100%;\n                        padding: 0 5px 0 8px;\n                        line-height: 38px;\n                        float: left;\n                        span{\n                            float: left;\n                            display: inline;\n                            padding-left: 5px;\n                            padding-right: 8px;\n                            width: 37px;\n                            text-align: right;\n                            overflow: hidden;\n                            text-overflow: ellipsis;\n                            white-space: nowrap;\n                            font-size: 16px;\n                            color: #666;\n                        }\n                        .play{\n                            float: right;\n                            display: inline;\n                            margin-top: 10px;\n                            width: 17px;\n                            height: 17px;\n                            cursor: pointer;\n                            background: url(\"../../images/table.png\") no-repeat -0px -103px;\n\n                            &:hover{\n                                background-position: -0px -128px;\n                                cursor: pointer;\n                            }\n                            // background: url(\"../../images/table.png\") no-repeat -20px -128px;\n                        }\n\n                    }\n\n                    .m2{\n                        width: 480px;\n                        height: 100%;\n                        overflow: hidden;\n                        text-overflow: ellipsis;\n                        white-space: nowrap;\n                        span{\n                            float: left;\n                            margin: 0 4px;\n                            line-height: 25px;\n                        }\n                        a{\n                            line-height: 25px;\n                            height: 100%; \n                            float: left;\n                            color: #000;\n                            font-weight: bold;\n                            &:hover{\n                                color: #000;\n                                cursor: pointer;\n                                text-decoration: underline;\n                            }\n                        }\n                        .art{\n                            font-weight: normal;\n                            color: #aeaeae;\n                            &:hover{\n                                color: #aeaeae;\n                                cursor: pointer;\n                                text-decoration: underline;\n                            }\n                        }\n                    }\n\n                    .m3{\n                        position: absolute;\n                        left: 480px;\n                        top: 4px;\n                        width: 91px;\n                        .time{\n                            display: block;\n                        }\n                        .show{\n                            width: 79px;\n                            height: 18px;\n                            display: none;\n                            a{\n                                margin: 2px 0 0 4px;\n                                width: 18px;\n                                height: 16px;\n                                display: block;\n                                float: left;\n                                background: url('../../images/table.png') no-repeat;\n                                &:hover{\n                                    cursor: pointer;\n                                }\n                            }\n                            .a1{\n                                width: 13px;\n                                height: 13px;\n                                margin-top:2px;\n                                margin-left: 0;\n                                background: url('../../images/icon.png') no-repeat;\n                                background-position: 0 -700px;\n\n                                &:hover{\n                                    background-position: -22px -700px;\n                                }\n                            }\n\n                            .a2{\n                                background-position: 0 -174px;\n                                &:hover{\n                                    background-position: -20px -174px;\n                                }\n                            }\n                            .a3{\n                                background-position: 0 -195px;\n                                &:hover{\n                                    background-position: -20px -195px;\n                                }\n                            }\n                            .a4{\n                                background-position: -81px -174px;\n                                &:hover{\n                                    background-position: -104px -174px;\n                                }\n                            }\n                        }\n                    }\n                    \n                    .tops{\n                        width: 319px;\n                        height: 100%;\n                        float: right;\n                        position: relative;\n                        .bg{\n                            position: absolute;\n                            z-index: 1;\n                            width: 30%;\n                            height: 38px;\n                            background-color: #4eb4f5;\n                            opacity: 0.2;\n                            transition: 1s all;\n                        }\n                        .times{\n                            position: absolute;\n                            left: 10px;\n                            z-index: 1;\n                            height: 38px;\n                            line-height: 38px;\n                            color: #666;\n                        }\n                        \n                    }\n                }\n                ul:nth-of-type(even){\n                    background: #f7f7f7;\n                    &:hover{\n                        background-color: #eee;\n                    }\n                }\n            }\n            .more{\n                width: 100%;\n                height: 32px;\n                a{\n                    float: right;\n                    color:#666;\n                    line-height: 32px;\n                    text-align: right;\n                    font-family: Arial, Helvetica, sans-serif;\n                    -webkit-text-size-adjust: none;\n                }\n            }\n        }\n    }\n</style>"]}]}